# Project Planning

This document outlines the functionalities, models, and routes for the voting project.

## Table of Contents

* [Project Planning](#project-planning)
    * [Functionalities](#functionalities)
    * [Models](#models)
    * [Routes](#routes)
    * [Additional Considerations](#additional-considerations)
    * [Flow Diagram](#flow-diagram)

## Functionalities

1. **User Authentication:**
   - Sign Up (/signup, POST): Creates a new user account with unique government ID proof.
   - Login (/login, POST): Authenticates existing user with government ID proof and password.
   - Change Password (/profile/password, PUT): Allows users to update their passwords.
2. **Candidate Management:** (Admin-only)
   - Create Candidates (/candidates, POST): Adds candidates to the election list.
   - Update Candidate Details (/candidate/:candidateID, PUT): Modifies an existing candidate's information.
   - Delete Candidate (/candidate/:candidateID, DELETE): Removes a candidate from the election list.
3. **Voting:**
   - View Candidates (/candidates, GET): Retrieves a list of all candidates in the election.
   - Cast Vote (/vote, POST): Allows users to submit a single vote for a candidate (one vote per user).
   - Live Vote Count (/vote/counts, GET): Displays the current vote count for each candidate, sorted by most to least votes.
4. **User Profile:**
   - Get User Profile (/profile, GET): Fetches the profile information of the registered user.

## Models

* **User Collection:**
    - `_id` (unique identifier, generated by MongoDB)
    - `password` (hashed and salted string, required)
    - `government_id` (string, unique, required)
    - `mobile` (string, unique)
    - `age` (string, minimum, required)
    - `name` (string, required)
    - `address` (string, required)
    - `role` (string, enum, default)
    - `isVoted` (boolean, default)
* **Candidate Collection:**
    - `_id` (unique identifier, generated by MongoDB)
    - `name` (string, required)
    - `partyName` (string, required)
    - `votes` (array of objects, userId, votedAt)
    - `voteCount` (number, default)
* **Vote Collection (Optional):**
    - `_id` (unique identifier, generated by MongoDB)
    - `user_id` (reference to the User collection)
    - `candidate_id` (reference to the Candidate collection)
    - `timestamp` (date and time of the vote)

**Note:** Implementing a Vote collection can be beneficial for tracking vote history or enabling vote verification features.

## Routes

The routes are grouped functionally for better organization:

**1. User Authentication:**

- /signup (POST) - Create a new user account
- /login (POST) - Login to existing account
- /profile (GET) - Get the user profile
- /profile/password (PUT) - Update user password

**2. Voting:**

- /candidates (GET) - List of candidates
- /vote (POST) - Cast a vote
- /vote/counts (GET) - Live vote count

**3. Admin (Candidate Management):**

- /candidates (POST) - Create candidates
- /candidate/:candidateID (PUT) - Update candidate details
- /candidate/:candidateID (DELETE) - Delete candidate

## Additional Considerations

- Secure password storage with hashing and salting.
- Error handling and validation for user input.
- Authentication for admin routes to prevent unauthorized access.
- Consider implementing a "Vote" model to track user votes and enable features like vote history or vote verification (if applicable).
- Explore authorization mechanisms using roles or permissions to restrict access to routes based on user type (e.g., admin vs. user).
- Test the API endpoints thoroughly to ensure security and functionality.

## Flow Diagram

![Flow Diagram](Voting%20Application%20Flow%20Diagram.drawio.svg)
